// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.1.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  Int       @id @default(autoincrement())
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
  username            String    @unique
  hashedPasswd        String
  salt                String
  TFAMode             Boolean
  email               String    @unique
  TFACode             String    @unique
  TFAExpiresAt        String
  profilePicture      String
  sessions            Session[]
  // score               Score[]
  // messages            Messages[]

  @@map("users")
}

model Session {
  id                  Int      @id @default(autoincrement())
  user                User     @relation(fields: [userId], references: [id])
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  expiresAt           DateTime
  userId              Int
  jwtToken            String   @unique
  serializedCookie    String   @unique
  hashedCookie        String   @unique

  @@map("sessions")
}

// model  Score {
//    id            Int    @id @default(autoincrement())
//    gameTime      DateTime @default(now())
//    loosing       Int
//    rating        Int
//    wining        Int
//    userId        Int
//    Player   User   @relation(fields: [userId], references: [id])
   
//  @@map("score")
// }

// model Messages {
//   id                    Int   @id @default(autoincrement())
//   roomId                Int ---> get it from chat websocket!
//   createdAt             DateTime @default(now())
//   value                 String
//   userId                Int
//   user                  User  @relation(fields: [user_id], references: [id])
//   @@map("messages")
// }
